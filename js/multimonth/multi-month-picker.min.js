!function(t){"use strict";t.MultiMonthPicker={VERSION:"1.0",months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},t.widget("oaksio.multiMonthPicker",{options:{monthFormat:"yyyy-mm",value:[]},_value:function(){if(!Array.isArray(this.options.value))throw new Error('Invalid "value" option. It must be an array.');this.options.value=new Set(this.options.value)},_create:function(){this._value(),this._currentYear=(new Date).getFullYear(),this._createElements(),this._bindEvents(),this._refresh()},_createElements:function(){t(this.element).attr("autocomplete","off"),this.wrapper=t("<div>",{class:"multi-month-picker"}),this._createTable(),this.wrapper.appendTo("body")},_createTable:function(){const e=t("<table>"),n=this._createHeaderButton("Prev","prev-button"),o=this._createHeaderButton("Next","next-button"),r=this._createHeaderButton(this._currentYear,"year"),a=t("<thead>").append(t("<tr>").append(n,r,o)),s=t("<tbody>");for(let e=0;e<4;e++){const n=t("<tr>");for(let o=0;o<3;o++){const r=3*e+o,a=t("<td>").html(this._createMonthButton(r));n.append(a)}s.append(n)}e.append(a,s),this.wrapper.append(e),this.wrapper.append(this._createFooterButton("text",""))},_createHeaderButton:function(e,n){return t("<th>").html(t("<a>",{text:e,class:n}))},_createMonthButton:function(e){return t("<a>",{text:t.MultiMonthPicker.months[e],class:"month-button",data:{monthIndex:e,value:this._format(this._currentYear,e)}})},_createFooterButton:function(){const e=t("<button>",{text:"Clear",class:"clear-button"}),n=t("<button>",{text:"Done",class:"done-button"});return t("<div>",{class:"footer"}).append(e,n)},_bindEvents:function(){const e=this;this.wrapper.on("click",".prev-button",(function(t){t.stopPropagation(),e._currentYear--,e._refresh()})),this.wrapper.on("click",".next-button",(function(t){t.stopPropagation(),e._currentYear++,e._refresh()})),this.wrapper.on("click",".month-button",(function(n){n.stopPropagation();const o=t(this).data("value");e.options.value.has(o)?e.options.value.delete(o):e.options.value.add(o),e._refresh()})),this.wrapper.on("click",".clear-button",(function(t){t.stopPropagation(),e.options.value.clear(),e._refresh()})),this.wrapper.on("click",".done-button",(function(t){t.stopPropagation(),e._close()})),this.element.on("click",(function(t){t.stopPropagation(),e._open()})),t(document).on("click",(function(n){const o=t(e.wrapper);o.is(n.target)||0!==o.has(n.target).length||e._close()}))},_open:function(){const e=this.element.offset().top+this.element.height()+7,n=this.element.offset().left;t(this.wrapper).css({left:`${n}px`,top:`${e}px`}),this.wrapper.addClass("show")},_close:function(){this.wrapper.removeClass("show")},_format:function(e,n){const o={yyyy:e.toString(),yy:e.toString().slice(-2),mmm:t.MultiMonthPicker.months[n],mm:`${n+1}`.padStart(2,"0"),m:`${n+1}`};return this.options.monthFormat.replace(/yyyy|yy|mmm|mm|m/g,(function(t){return o[t]}))},_refresh:function(){const e=this;this.wrapper.find(".year").html(this._currentYear),this.wrapper.find(".month-button").each((function(){const n=t(this).data("monthIndex"),o={monthIndex:n,value:e._format(e._currentYear,n)};t(this).data(o).removeClass("active"),e.options.value.has(o.value)&&t(this).addClass("active")})),this.element.val(Array.from(this.options.value).join(", "))},destroy:function(){this.element.removeAttr("autocomplete"),this.wrapper.remove()},value:function(){return Array.from(this.options.value)}})}(jQuery);