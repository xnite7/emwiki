# Redirect all .site traffic to .com
# Note: Absolute URL redirects are not supported in Cloudflare Pages _redirects
# Domain-level redirects should be configured in Cloudflare DNS/Page Rules instead
# https://emwiki.site/* https://emwiki.com/:splat 301!

# Let /api/embed/* be handled by your Worker — no redirect here
# (Remove the invalid 404 redirect line)

/api/embed/*    /api/embed/:splat    200

# Forum post permalinks handled by functions/forum/[id].js (serves forum.html)

# Other API routes fallback (if you want static files or Worker routing)
# Adjust or remove as needed depending on your setup
/api/*          /api/:splat          200


# Catch-all SPA fallback for frontend — rewrite to serve index.html
# Explicit /index.html first to avoid infinite loop (/* would match it)
/index.html     /index.html          200
/*              /index.html          200
